{"name": "End-to-End Tests: Search, Add to Cart and Verify Cart Total", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 10000ms exceeded.\nCall log:\n  - waiting for locator(\"[data-test-id=\\\"SUBTOTAL\\\"]\") to be visible\n    - waiting for\" https://www.ebay.com/splashui/captcha_submit\" navigation to finish...\n    - navigated to \"https://cart.ebay.com/\"", "trace": "page = <Page url='https://cart.ebay.com/'>\n\n    @allure.title(\"End-to-End Tests: Search, Add to Cart and Verify Cart Total\")\n    def test_e2e(page):\n    \n        search_page = page  # save the main tab\n        with allure.step(\"Open the eBay homepage\"):\n            home = HomePage(page)\n            home.open()\n            home.assert_title()\n    \n        with allure.step(\"Looking for items by name under a certain price and limit\"):\n            home.open_advanced_search()\n            adv = AdvancedSearchPage(page)\n            adv.search_items_under_item_price_limit(\"dress\", \"100\", \"60\")\n            page.wait_for_selector(\"#srp-river-results\")\n    \n        with allure.step(\"Add first 3 items from search results to cart with variant selection\"):\n            base = BasePage(search_page)\n    \n            ITEMS_TO_ADD = 3\n            for i in range(ITEMS_TO_ADD):\n                product_page = base.click_product_card(label=\"Buy It Now\")\n                product_page.select_random_variant()\n                product_page.add_to_cart()\n    \n            # screenshot in Allure report after adding each item\n            allure.attach(\n                product_page.page.screenshot(),\n                name=f\"added_item_{i+1}\",\n                attachment_type=allure.attachment_type.PNG\n            )\n    \n            # Close product tab and return to search page\n            product_page.page.close()\n            search_page.bring_to_front()\n    \n        with allure.step(\"Verify cart total does not exceed the limit\"):\n            cart_page = CartPage(page)\n            cart_page.open()\n>           cart_page.assert_total_not_exceeds(110, ITEMS_TO_ADD)\n\nsrc\\tests\\test_e2e_search_add_cart.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nsrc\\pages\\cart_page.py:24: in assert_total_not_exceeds\n    total = self.get_total()\n            ^^^^^^^^^^^^^^^^\nsrc\\pages\\cart_page.py:15: in get_total\n    subtotal.wait_for(timeout=10000)\n..\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:18005: in wait_for\n    self._sync(self._impl_obj.wait_for(timeout=timeout, state=state))\n..\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_locator.py:692: in wait_for\n    await self._frame.wait_for_selector(\n..\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_frame.py:369: in wait_for_selector\n    await self._channel.send(\n..\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x0000027607BC9CA0>, cb = <function Channel.send.<locals>.<lambda> at 0x0000027608262B60>, is_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 10000ms exceeded.\nE           Call log:\nE             - waiting for locator(\"[data-test-id=\\\"SUBTOTAL\\\"]\") to be visible\nE               - waiting for\" https://www.ebay.com/splashui/captcha_submit\" navigation to finish...\nE               - navigated to \"https://cart.ebay.com/\"\n\n..\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_connection.py:559: TimeoutError"}, "steps": [{"name": "Open the eBay homepage", "status": "passed", "start": 1768115758465, "stop": 1768115760123}, {"name": "Looking for items by name under a certain price and limit", "status": "passed", "start": 1768115760123, "stop": 1768115764301}, {"name": "Add first 3 items from search results to cart with variant selection", "status": "passed", "attachments": [{"name": "added_item_3", "source": "7220cb52-db4f-4650-b1bc-e5a93f0537c1-attachment.png", "type": "image/png"}], "start": 1768115764301, "stop": 1768115788384}, {"name": "Verify cart total does not exceed the limit", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 10000ms exceeded.\nCall log:\n  - waiting for locator(\"[data-test-id=\\\"SUBTOTAL\\\"]\") to be visible\n    - waiting for\" https://www.ebay.com/splashui/captcha_submit\" navigation to finish...\n    - navigated to \"https://cart.ebay.com/\"\n\n", "trace": "  File \"C:\\Users\\Victoria\\ebay-e2e-automation\\src\\tests\\test_e2e_search_add_cart.py\", line 46, in test_e2e\n    cart_page.assert_total_not_exceeds(110, ITEMS_TO_ADD)\n  File \"C:\\Users\\Victoria\\ebay-e2e-automation\\src\\pages\\cart_page.py\", line 24, in assert_total_not_exceeds\n    total = self.get_total()\n            ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Victoria\\ebay-e2e-automation\\src\\pages\\cart_page.py\", line 15, in get_total\n    subtotal.wait_for(timeout=10000)\n  File \"C:\\Users\\Victoria\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 18005, in wait_for\n    self._sync(self._impl_obj.wait_for(timeout=timeout, state=state))\n  File \"C:\\Users\\Victoria\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"C:\\Users\\Victoria\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_locator.py\", line 692, in wait_for\n    await self._frame.wait_for_selector(\n  File \"C:\\Users\\Victoria\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_frame.py\", line 369, in wait_for_selector\n    await self._channel.send(\n  File \"C:\\Users\\Victoria\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Victoria\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 559, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "start": 1768115788384, "stop": 1768115799113}], "start": 1768115758465, "stop": 1768115799114, "uuid": "74324510-b82f-4377-9207-c75e272e5e34", "historyId": "ed3c651e346dd439f3b66dcd56d0718d", "testCaseId": "ed3c651e346dd439f3b66dcd56d0718d", "fullName": "src.tests.test_e2e_search_add_cart#test_e2e", "labels": [{"name": "parentSuite", "value": "src.tests"}, {"name": "suite", "value": "test_e2e_search_add_cart"}, {"name": "host", "value": "VictoriaHome"}, {"name": "thread", "value": "64964-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "src.tests.test_e2e_search_add_cart"}], "titlePath": ["src", "tests", "test_e2e_search_add_cart.py"]}